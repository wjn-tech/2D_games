# Tasks: 完整游戏实现里程碑

## Phase 1: 基础框架与 UI 美化 (Foundation & UI Polish)
- [x] 1.1 创建全局 UI Theme 并应用到现有窗口（背包、插槽）。
- [x] 1.2 为 `UIManager` 增加窗口打开/关闭的 Tween 动画。
- [x] 1.3 实现主菜单界面（开始游戏、加载游戏、退出）。
- [x] 1.4 实现游戏内 HUD（显示生命、寿命、金币、当前坐标）。
- [x] 1.5 实现存档选择界面（支持 3 个槽位预览）。

## Phase 2: 核心系统深度补完 (Core Systems Completion)
- [x] 2.1 **NPC AI**: 实现基础状态机（闲逛、追逐、逃跑、捕食）。
- [x] 2.2 **战斗系统**: 实现伤害计算、击退效果、屏幕抖动反馈。
- [x] 2.3 **弹药系统**: 实现远程武器消耗弹药逻辑与弹药附魔。
- [x] 2.4 **图层系统**: 实现图层切换时的视觉遮罩（非活跃层变暗）。
- [x] 2.5 **工业系统**: 实现自动采矿机与电源节点的连接逻辑。

## Phase 3: 生命、婚姻与继承 (Life & Lineage)
- [x] 3.1 实现时间流逝导致的寿命减少与视觉反馈（如进度条变红）。
- [x] 3.2 实现求婚与子嗣生成逻辑（属性遗传算法）。
- [x] 3.3 实现子嗣成长期逻辑（幼年 -> 成年）。
- [x] 3.4 实现死亡转生流程：选择子嗣 -> 属性继承 -> 装备保留。

## Phase 4: 生态、天气与经济 (Ecology & Economy)
- [x] 4.1 实现天气控制器（晴、雨、雪、雷雨）及其对玩家的影响。
- [x] 4.2 实现植物生长逻辑（随时间改变 Tile）。
- [x] 4.3 实现商人交易界面与库存自动刷新。
- [x] 4.4 实现城邦领地逻辑（放置核心建筑划定保护区）。

## Phase 5: 最终整合与润色 (Final Integration & Polish)
- [x] 5.1 整合所有音效钩子（挖掘声、攻击声、UI 点击声）。
- [x] 5.2 整合粒子效果（挖掘碎屑、战斗火花）。
- [x] 5.3 最终平衡性调整（数值调优）。
- [x] 5.4 编写完整的游戏操作指南 UI.
